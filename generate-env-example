#!/usr/bin/env bash
# Script para generar un archivo .env.example a partir de cualquier .env
# Conserva comentarios y líneas en blanco,

set -euo pipefail

if [ $# -lt 1 ]; then
  echo "Uso: $0 archivo.env [salida.env.example]"
  exit 1
fi

INPUT_FILE="$1"
OUTPUT_FILE="${2:-$(basename "$INPUT_FILE").example}"

if [ ! -f "$INPUT_FILE" ]; then
  echo "❌ No se encontró $INPUT_FILE"
  exit 1
fi

awk -F= '
  /^[[:space:]]*#/ {print; next}   
  NF==0 {print; next}              
  {print $1"="}                    
' "$INPUT_FILE" > "$OUTPUT_FILE"

echo "✅ Generado $OUTPUT_FILE a partir de $INPUT_FILE"

